[TOC]

### 1.java内存泄漏基础知识

```
（1）java内存的分配策略
	静态存储区（方法区）：静态变量，常量。
	栈：方法执行时，存局部变量。效率很高，但是容量优先，递归操作会导致栈溢出的情况
			在方法体内：局部变量，基本类型。对象的引用变量
			
	堆：由java垃圾回收器
			new出来的引用变量，数组。

（2）java是如何管理内存的
		其实，就是对象的分配和释放的问题。所有的对象都是在堆中存放，对象分配由咱们自己来做，对象的释放由GC来做。
		对象的内存创建，引用，被引用，对象的内存释放。
		
		main方法的引用，可达。内存管理有向图
		根订单可达的对象都是有效对象，跟顶点
		
		
（3）java中的内存泄漏
		内存泄露是指无用对象(不再使用的对象)持续占有内存或无用对象的内存得不到及时释放，从而造成的内存空间的浪费称为内存泄露
```

![image-20200914074326241](/Users/shaowenwen/Library/Application Support/typora-user-images/image-20200914074326241.png)



### 2.Android内存泄漏

```
（1）单例
		ui布局中，大量重叠的地方。
		好几层背景的设置，可以看下。
		
（2）匿名内部类
（3）handler
		改为静态内部类，在handler内部持有外部类的弱引用来调用外部类的方法
		
（4）避免使用static变量
		
（5）资源未关闭造成的内存泄漏


（6）asynctask造成的内存泄漏
		内部类，持有外部类的引用。cancel方法


补充：bitmap.调用recycle()方法，不调用的话，c端的资源将无法被释放。

```
